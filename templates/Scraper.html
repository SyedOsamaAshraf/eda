<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css" integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk" crossorigin="anonymous">


<head>
	<title>Scraper</title>
</head>
<body>
<nav class="navbar navbar-expand-sm bg-dark navbar-dark">
  <!-- Brand -->
  <a class="navbar-brand" href="{{ url_for('data') }}">EDA</a>

  <!-- Links -->
  <ul class="navbar-nav">
    <li class="nav-item">

      <a class="nav-link" href="{{ url_for('dash') }}">Dashboard</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-link" href="{{ url_for('profiled') }}">Profiled</a>
    </li>
    <li class="nav-item">
      <a class="nav-link" href="{{ url_for('scraper') }}">Scraper</a>
    </li>

   <form action="/data" method="POST" style="margin-left: 600px" enctype="multipart/form-data">
  <input type="file" name="file" class="btn btn-primary" value="">
  <input type="submit" name="" class="btn btn-primary" value="Submit">
</form>
    <!-- Dropdown -->
 
  </ul>
</nav>

<div class="container-fluid">

<center>Please make sure table is present on website & its not a wikipedia website.
  <br><br>
<input type="text" id="text" style="width: 500px;" name="site"><br><br>
<button id="Submit">Scrape</button>&nbsp &nbsp<button onclick="location.href='./download1'" type="button">
         Download</button>
</center>  
</div><br>
<div class="container-fluid">
<div id="table" style="min-height: 1px;min-width: 1px;max-width: 1500px;max-height: 500px;overflow:hidden;overflow: auto;"></div>
</div>


<br><center></center>


<footer class="page-footer font-small blue">

  <!-- Copyright -->
  <div class="footer-copyright text-center py-3">Â© 2020 Copyright:
    <a href="https://linkedin.com/in/syed-osama-ashraf-9b3aaa93/"> Developed by Syed Osama</a>

    <a href="https://linkedin.com/in/syed-osama-ashraf-9b3aaa93/">Linkedin</a>
  </div>
  <!-- Copyright -->

</footer>

<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js" integrity="sha384-OgVRvuATP1z7JjHLkuOU7Xw704+h835Lr+6QL9UvYjZE3Ipu6Tp75j7Bh/kR0JKI" crossorigin="anonymous"></script>


<script type="text/javascript">
 document.getElementById('Submit').addEventListener('click',scrape)
 function scrape() {

       var url=document.getElementById('text').value;
        //alert("You have choosen " + url);

              // body...
              // //console.log('hey');
              const xhr=new XMLHttpRequest();
               xhr.open('POST','/scraped',true);
               xhr.getAllResponseHeaders();
               xhr.onprogress=function(){
                 //console.log('hello')
               }

               xhr.onload=function(){
                 document.getElementById('table').innerHTML="<div class='table table-bordered'>" + this.responseText + "</div>";
                    
                 console.log("Response  "+this.responseText)
               }
               
               //console.log(sel.length," Size");
               url=JSON.stringify(url);
               console.log(url);
               xhr.send(url);
            }     

</script>
</body>
</html>

